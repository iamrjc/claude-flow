{
  "hooks": {
    "PreToolUse": [
      {
        "matcher": "^(Write|Edit|MultiEdit)$",
        "hooks": [
          {
            "type": "command",
            "command": "npx claude-flow@v3alpha hooks pre-edit --file \"$TOOL_INPUT_file_path\" --intelligence",
            "timeout": 5000,
            "continueOnError": true
          }
        ]
      },
      {
        "matcher": "^Bash$",
        "hooks": [
          {
            "type": "command",
            "command": "npx claude-flow@v3alpha hooks pre-command --command \"$TOOL_INPUT_command\"",
            "timeout": 5000,
            "continueOnError": true
          }
        ]
      },
      {
        "matcher": "^Task$",
        "hooks": [
          {
            "type": "command",
            "command": "npx claude-flow@v3alpha hooks pre-task --task-id \"task-$(date +%s)\" --description \"$TOOL_INPUT_prompt\"",
            "timeout": 5000,
            "continueOnError": true
          }
        ]
      },
      {
        "matcher": "^(Grep|Glob|Read)$",
        "hooks": [
          {
            "type": "command",
            "command": "npx claude-flow@v3alpha hooks pre-search --pattern \"$TOOL_INPUT_pattern\"",
            "timeout": 2000,
            "continueOnError": true
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "^(Write|Edit|MultiEdit)$",
        "hooks": [
          {
            "type": "command",
            "command": "npx claude-flow@v3alpha hooks post-edit --file \"$TOOL_INPUT_file_path\" --success \"$TOOL_SUCCESS\" --train-patterns",
            "timeout": 5000,
            "continueOnError": true
          }
        ]
      },
      {
        "matcher": "^Bash$",
        "hooks": [
          {
            "type": "command",
            "command": "npx claude-flow@v3alpha hooks post-command --command \"$TOOL_INPUT_command\" --success \"$TOOL_SUCCESS\" --exit-code \"$TOOL_EXIT_CODE\"",
            "timeout": 5000,
            "continueOnError": true
          }
        ]
      },
      {
        "matcher": "^Task$",
        "hooks": [
          {
            "type": "command",
            "command": "npx claude-flow@v3alpha hooks post-task --agent-id \"$TOOL_RESULT_agent_id\" --success \"$TOOL_SUCCESS\" --analyze",
            "timeout": 5000,
            "continueOnError": true
          }
        ]
      },
      {
        "matcher": "^(Grep|Glob)$",
        "hooks": [
          {
            "type": "command",
            "command": "npx claude-flow@v3alpha hooks post-search --cache-results",
            "timeout": 2000,
            "continueOnError": true
          }
        ]
      }
    ],
    "UserPromptSubmit": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "npx claude-flow@v3alpha hooks route --task \"$PROMPT\" --intelligence --include-explanation",
            "timeout": 5000,
            "continueOnError": true
          }
        ]
      }
    ],
    "SessionStart": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "npx claude-flow@v3alpha daemon start --quiet 2>/dev/null || true",
            "timeout": 5000,
            "continueOnError": true
          },
          {
            "type": "command",
            "command": "npx claude-flow@v3alpha hooks session-start --session-id \"$SESSION_ID\" --load-context",
            "timeout": 10000,
            "continueOnError": true
          }
        ]
      }
    ],
    "Stop": [
      {
        "hooks": [
          {
            "type": "prompt",
            "prompt": "Evaluate task completion. Consider:\n1. Were all requested changes made?\n2. Did builds/tests pass?\n3. Is follow-up work needed?\n\nRespond with {\"decision\": \"stop\"} if complete, or {\"decision\": \"continue\", \"reason\": \"...\"} if more work is needed."
          }
        ]
      }
    ],
    "Notification": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "npx claude-flow@v3alpha hooks notify --message \"$NOTIFICATION_MESSAGE\" --swarm-status",
            "timeout": 3000,
            "continueOnError": true
          }
        ]
      }
    ],
    "PermissionRequest": [
      {
        "matcher": "^mcp__claude-flow__.*$",
        "hooks": [
          {
            "type": "command",
            "command": "echo '{\"decision\": \"allow\", \"reason\": \"claude-flow MCP tool auto-approved\"}'",
            "timeout": 1000
          }
        ]
      },
      {
        "matcher": "^Bash\\(npx @?claude-flow.*\\)$",
        "hooks": [
          {
            "type": "command",
            "command": "echo '{\"decision\": \"allow\", \"reason\": \"claude-flow CLI auto-approved\"}'",
            "timeout": 1000
          }
        ]
      }
    ]
  },
  "statusLine": {
    "command": "npx @claude-flow/hooks statusline 2>/dev/null || node .claude/helpers/statusline.js 2>/dev/null || echo \"â–Š V3\"",
    "refreshMs": 5000,
    "enabled": true
  },
  "permissions": {
    "allow": [
      "Bash(npx claude-flow*)",
      "Bash(npx @claude-flow/*)",
      "mcp__claude-flow__*"
    ],
    "deny": []
  },
  "claudeFlow": {
    "version": "3.0.0",
    "enabled": true,
    "modelPreferences": {
      "default": "claude-opus-4-5-20251101",
      "routing": "claude-3-5-haiku-20241022"
    },
    "swarm": {
      "topology": "hierarchical-mesh",
      "maxAgents": 15
    },
    "memory": {
      "backend": "hybrid",
      "enableHNSW": true
    },
    "neural": {
      "enabled": true
    },
    "daemon": {
      "autoStart": true,
      "workers": [
        "map",
        "audit",
        "optimize",
        "consolidate",
        "testgaps"
      ]
    }
  }
}